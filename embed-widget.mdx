---
title: "Embed Widget"
description: "Add the Crow widget to your website"
---

## Installation

Choose your preferred installation method:

<Tabs>
  <Tab title="Script Tag">
    Add the script before `</body>`:

    <CodeGroup>

    ```html HTML
    <script
      src="https://api.usecrow.org/static/crow-widget.js"
      data-api-url="https://api.usecrow.org"
      data-product-id="YOUR_PRODUCT_ID"
      data-agent-name="Your Agent Name"
    ></script>
    ```

    ```jsx Next.js
    import Script from 'next/script'

    export default function Layout({ children }) {
      return (
        <>
          {children}
          <Script
            src="https://api.usecrow.org/static/crow-widget.js"
            data-api-url="https://api.usecrow.org"
            data-product-id="YOUR_PRODUCT_ID"
            data-agent-name="Your Agent Name"
            strategy="afterInteractive"
          />
        </>
      )
    }
    ```

    </CodeGroup>

    | Attribute | Required | Description |
    |-----------|----------|-------------|
    | `data-api-url` | Yes | `https://api.usecrow.org` |
    | `data-product-id` | Yes | Your product ID from dashboard |
    | `data-agent-name` | No | Display name (defaults to "Assistant") |
  </Tab>

  <Tab title="React SDK">
    Install the SDK:

    ```bash
    npm install @usecrow/client @usecrow/ui
    ```

    Add to your app:

    ```tsx
    'use client';

    import { CrowWidget } from '@usecrow/ui';
    import '@usecrow/ui/styles.css';

    export function CrowWidgetClient() {
      return (
        <CrowWidget
          productId="YOUR_PRODUCT_ID"
          apiUrl="https://api.usecrow.org"
          agentName="Your Agent Name"
        />
      );
    }
    ```

    | Prop | Required | Description |
    |------|----------|-------------|
    | `productId` | Yes | Your product ID from dashboard |
    | `apiUrl` | Yes | `https://api.usecrow.org` |
    | `agentName` | No | Display name (defaults to "Assistant") |
    | `getIdentityToken` | No | Async function returning a JWT. Auto-refreshes on expiry. See [Identity Verification](/identity-verification) |
    | `context` | No | Page context object sent with every message. Reactive — updates when the object changes |
    | `toolRenderers` | No | Map of tool name → React component for inline rendering. See [Tool Renderers](/tool-renderers) |
    | `onToolResult` | No | Callback `(toolName, result) => void` fired when a server-side tool completes |
    | `navigate` | No | SPA navigation function (e.g. `router.push`) for internal links |

    <Accordion title="Copilot Sidebar">
    The SDK also includes a sidebar component — no provider wrapping needed:

    ```tsx
    'use client';

    import { CrowCopilot } from '@usecrow/ui';
    import '@usecrow/ui/styles.css';

    export function App() {
      return (
        <>
          <YourApp />
          <CrowCopilot
            productId="YOUR_PRODUCT_ID"
            apiUrl="https://api.usecrow.org"
            variant="floating"
            position="right"
            width={400}
            getIdentityToken={async () => {
              const res = await fetch('/api/crow-token');
              const { token } = await res.json();
              return token;
            }}
            context={{ pageId: 'current-page-id' }}
            navigate={(path) => router.push(path)}
          />
        </>
      );
    }
    ```
    </Accordion>
  </Tab>
</Tabs>

## Find Your Product ID

1. Go to [app.usecrow.ai/deploy](https://app.usecrow.ai/deploy)
2. Copy your Product ID

---

## User Identity

Authenticate users for persistent conversations and user-specific actions.

<Tabs>
  <Tab title="Script Tag">
    ```javascript
    window.crow('identify', {
      token: 'jwt-from-your-backend',  // Required
      name: 'John Doe'                  // Optional
    })

    // On logout
    window.crow('resetUser')
    ```
  </Tab>

  <Tab title="React SDK">
    Pass `getIdentityToken` — the SDK handles calling it on mount and auto-refreshing on expiry:

    ```tsx
    import { CrowWidget } from '@usecrow/ui';

    function App() {
      return (
        <CrowWidget
          productId="YOUR_PRODUCT_ID"
          apiUrl="https://api.usecrow.org"
          getIdentityToken={async () => {
            const res = await fetch('/api/crow-token');
            const { token } = await res.json();
            return token;
          }}
        />
      );
    }
    ```
  </Tab>
</Tabs>

See [Identity Verification](/identity-verification) for backend JWT setup.

---

## Client-Side Tools

Register tools the agent can call. The return value from your handler is sent back to the agent, so it can confirm success or handle errors intelligently.

See [Client-Side Tools](/client-side-tools) for full setup.

<Tabs>
  <Tab title="Script Tag">
    ```javascript
    window.crow('registerTools', {
      navigateToPage: async ({ path }) => {
        router.push(path)
        return { success: true }  // Agent sees this result
      },
      
      showUpgradeModal: async () => {
        document.getElementById('upgrade-modal').showModal()
        return { shown: true }
      }
    })
    ```
  </Tab>

  <Tab title="React SDK">
    ```tsx
    import { CrowWidget } from '@usecrow/ui';

    function App() {
      const tools = {
        navigateToPage: async ({ path }) => {
          router.push(path);
          return { success: true };  // Agent sees this result
        },
        
        showUpgradeModal: async () => {
          document.getElementById('upgrade-modal').showModal();
          return { shown: true };
        }
      };

      return (
        <CrowWidget
          productId="YOUR_PRODUCT_ID"
          apiUrl="https://api.usecrow.org"
          tools={tools}
        />
      );
    }
    ```
  </Tab>
</Tabs>

<Tip>
Return meaningful results from your tools. The agent uses these to provide accurate feedback like "Done! I've navigated you to Settings" or handle errors gracefully.
</Tip>

---

## Quick Q&A

Some users find it more intuitive to read setup instructions in Q&A format. Here's everything above as quick answers:

<AccordionGroup>
  <Accordion title="How do I add the chat to my app?">
    Install the SDK and drop in one component:

    ```bash
    npm install @usecrow/client @usecrow/ui
    ```

    ```tsx
    <CrowCopilot
      productId="YOUR_PRODUCT_ID"
      apiUrl="https://api.usecrow.org"
    />
    ```

    That's it. Chat works anonymously out of the box. No provider wrapping needed.
  </Accordion>

  <Accordion title="How do I authenticate users?">
    Two steps:

    1. **Create a backend endpoint** (~15 lines) that reads your existing session and mints a JWT signed with your Crow verification secret. Crow never sees your auth system — the JWT is the bridge.

    2. **Pass it as a prop:**

    ```tsx
    <CrowCopilot
      productId="YOUR_PRODUCT_ID"
      apiUrl="https://api.usecrow.org"
      getIdentityToken={async () => {
        const res = await fetch('/api/crow-token');
        const { token } = await res.json();
        return token;
      }}
    />
    ```

    The SDK calls this on mount and auto-refreshes when the token expires. No `useEffect`, no `setInterval`, no manual calls.

    This enables: conversation history, personalized responses, and user-specific tool actions.

    See [Identity Verification](/identity-verification) for the backend JWT setup.
  </Accordion>

  <Accordion title="How do I give the AI context about the current page?">
    Pass a `context` object. It's reactive — when it changes (e.g., user navigates), the AI automatically knows.

    ```tsx
    const context = useMemo(() => {
      const match = pathname.match(/\/items\/([^/]+)/);
      return match ? { itemId: match[1] } : {};
    }, [pathname]);

    <CrowCopilot
      ...
      context={context}
    />
    ```

    This gets injected into the AI's system prompt so it can perform page-aware actions like "edit this item" without asking which one.
  </Accordion>

  <Accordion title="How do I handle SPA navigation for links?">
    Pass your router's push function:

    ```tsx
    <CrowCopilot
      ...
      navigate={(path) => router.push(path)}
    />
    ```

    Internal links the AI returns will use your SPA router instead of a full page reload.
  </Accordion>

  <Accordion title="How do I react when the AI calls a tool?">
    Use `onToolResult` to trigger side effects (show a diff UI, refresh data, etc.):

    ```tsx
    <CrowCopilot
      ...
      onToolResult={(toolName, result) => {
        if (toolName === 'propose_revision') {
          showDiffUI(result);
        }
      }}
    />
    ```

    Use `toolRenderers` for custom inline components in the chat (charts, previews):

    ```tsx
    <CrowCopilot
      ...
      toolRenderers={{
        query_chart: ({ result }) => <MyChart data={result.data} />,
      }}
    />
    ```
  </Accordion>

  <Accordion title="What does the full setup look like?">
    Everything is a prop on one component:

    ```tsx
    <CrowCopilot
      productId="..."
      apiUrl="https://api.usecrow.org"
      getIdentityToken={fetchToken}
      context={{ itemId: "abc-123" }}
      navigate={(path) => router.push(path)}
      onToolResult={(name, result) => ...}
      toolRenderers={{ ... }}
      variant="floating"
      position="right"
    />
    ```

    No providers, no initializers, no polling.
  </Accordion>
</AccordionGroup>

---

## Troubleshooting

| Issue | Solution |
|-------|----------|
| Widget not appearing | Check Product ID, verify script/component is rendered |
| Console errors | Check `apiUrl` is correct |
| CORS errors | Contact support to whitelist your domain |
